(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,n){e.exports=n.p+"static/media/cover.1602b481.jpg"},208:function(e,t,n){e.exports=n(329)},217:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(25),s=n.n(r),i=n(17),c=n(31),l=n(116),u=(n(217),n(18)),p=n(19),d=n(22),h=n(20),g=n(21),m=n(36),f=n(11),y=n(8),S=n.n(y),E=n(66),b=n.n(E),v=n(44),k=n.n(v),O=function(e){return{type:"PLAY_SONG",song:e}},x=function(e){return{type:"GET_SONG_INDEX",songIndex:e}},T=function(e,t){return function(n){var a=new Request("https://api.spotify.com/v1/audio-features/".concat(e),{headers:new Headers({Authorization:"Bearer "+t})});n({type:"GET_SONG_FEATURES_PENDING"}),fetch(a).then(function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e.json()}).then(function(e){n({type:"GET_SONG_FEATURES_SUCCESS",features:e})}).catch(function(e){n({type:"GET_SONG_FEATURES_ERROR"})})}},I=n(61),C=n.n(I),w=n(62),j=n.n(w),P=n(46),_=n.n(P),R=n(47),N=n.n(R),A=n(58),D=n.n(A),G=n(60),L=n.n(G),F=n(28),M=n.n(F),U=n(59),H=n.n(U),Y=n(45),z=n.n(Y),B=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={selectedIndexSong:n.props.songIndex},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.songs.playlistId&&this.props.songs.playlistId!==e.songs.playlistId&&this.refs.tcontainer&&(this.refs.tcontainer.scrollTop=0),this.props.songIndex!==e.songIndex&&this.setState({selectedIndexSong:this.props.songIndex})}},{key:"msToMinutesAndSeconds",value:function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n}},{key:"SelectSongToPlay",value:function(e,t){this.props.getSongIndex(t),this.props.playSong(e.track),this.props.getSongFeatures(e.track.id,this.props.token),this.props.playAudio(e)}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.songs.songs?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:t.content,ref:"tcontainer"},o.a.createElement(D.a,{className:t.table},o.a.createElement(H.a,null,o.a.createElement(z.a,{key:"headertable"},o.a.createElement(M.a,{className:t.tableC},"TITLE"),o.a.createElement(M.a,{className:t.tableC,align:"left"},"ARTIST"),o.a.createElement(M.a,{className:t.tableC,align:"left"},"DURATION"))),o.a.createElement(L.a,null,this.props.songs.songs.map(function(n,a){return o.a.createElement(z.a,{selected:e.state.selectedIndexSong===a,className:t.tableRow,hover:!0,key:a+""+n.track.id,onClick:function(){return e.SelectSongToPlay(n,a)}},o.a.createElement(M.a,{className:t.tableC,component:"th",scope:"row"},n.track.name),o.a.createElement(M.a,{className:t.tableC,align:"left"},n.track.artists[0].name),o.a.createElement(M.a,{className:t.tableC,align:"left"},e.msToMinutesAndSeconds(n.track.duration_ms)))}))))):null}}]),t}(o.a.Component),W={getSongFeatures:T,getSongIndex:x,playSong:O},V=Object(i.b)(function(e){return{songs:e.songsReducer.songs?e.songsReducer:"",token:e.tokenReducer.token?e.tokenReducer.token:"",playlists:e.playlistsReducer,songIndex:e.songsReducer.songIndex}},W)(Object(f.withStyles)(function(e){return{content:{flexGrow:1,padding:0*e.spacing.unit,overflow:"auto",scrollbarWidth:"none","&::-webkit-scrollbar":{width:"0",height:"0"}},table:{maxWidth:500},tableC:{borderBottomColor:e.palette.divider},tableRow:{"&:hover":{cursor:"pointer"}}}})(B)),q=n(24),K=n.n(q),X=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={selectedIndexPL:n.props.playlists.playlistIndex,selectedIndexSong:n.props.songIndex},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.userId!==e.userId&&""!==this.props.userId&&""!==this.props.token&&this.props.fetchPlaylists(this.props.userId,this.props.token)}},{key:"renderList",value:function(){var e=this;return this.props.playlists.playlists?this.props.playlists.playlists.map(function(t,n){return o.a.createElement(_.a,{variant:"body2",button:!0,selected:e.state.selectedIndexPL===n,key:t.id,onClick:function(){return e.FetchSongs(e.props.userId,t.id,e.props.token,n)}},o.a.createElement(N.a,{primary:t.name}))}):o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,{variant:"body2",key:"generic"},o.a.createElement(N.a,{primary:"Loading Playlists..."})))}},{key:"FetchSongs",value:function(e,t,n,a){this.props.songs.playlistId!==t&&(this.props.fetchPlaylistSongs(e,t,n),this.props.getPlaylistIndex(a),this.props.getSongIndex(null),this.setState({selectedIndexPL:a}))}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{className:e.playTitle,variant:"overline",noWrap:!0},"PLAYLISTS"),o.a.createElement(K.a,{className:e.tracklistTotal,variant:"overline",noWrap:!0},this.props.songs.songs?this.props.songs.songs.length+" SONGS":null),o.a.createElement("div",{className:e.root},o.a.createElement(C.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},anchor:"left"},o.a.createElement(j.a,{component:"nav"},this.renderList())),this.props.fetchSongsPending?null:o.a.createElement(V,{playAudio:this.props.playAudio})))}}]),t}(o.a.Component),$={fetchPlaylists:function(e,t){return function(n){var a=new Request("https://api.spotify.com/v1/users/".concat(e,"/playlists?limit=50"),{headers:new Headers({Authorization:"Bearer "+t})});n({type:"FETCH_PLAYLISTS_PENDING"}),fetch(a).then(function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e.json()}).then(function(e){n({type:"FETCH_PLAYLISTS_SUCCESS",playlists:e.items})}).catch(function(e){n({type:"FETCH_PLAYLISTS_ERROR"})})}},fetchPlaylistSongs:function(e,t,n){return function(a){var o=new Request("https://api.spotify.com/v1/users/".concat(e,"/playlists/").concat(t,"/tracks"),{headers:new Headers({Authorization:"Bearer "+n})});a({type:"FETCH_PLAYLIST_SONGS_PENDING"}),fetch(o).then(function(e){return e.json()}).then(function(e){a(function(e,t){return{type:"FETCH_PLAYLIST_SONGS_SUCCESS",songs:e,playlistId:t}}(e.items,t))}).catch(function(e){a({type:"FETCH_PLAYLIST_SONGS_ERROR"})})}},playSong:O,getSongFeatures:T,getSongIndex:x,getPlaylistIndex:function(e){return{type:"GET_PLAYLIST_INDEX",playlistIndex:e}}},J=Object(i.b)(function(e){return{userId:e.userReducer.user?e.userReducer.user.id:"",token:e.tokenReducer.token?e.tokenReducer.token:"",playlists:e.playlistsReducer,songs:e.songsReducer.songs?e.songsReducer:"",selectedSongId:e.songsReducer.songId,songIndex:e.songsReducer.songIndex,fetchSongsPending:e.songsReducer.fetchSongsPending}},$)(Object(f.withStyles)(function(e){return{root:{display:"flex",maxHeight:"640px"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,position:"relative",background:"transparent",overflow:"auto",scrollbarWidth:"none","&::-webkit-scrollbar":{width:"0",height:"0"}},playTitle:{position:"absolute",marginLeft:"15px",marginTop:"-25px"},tracklistTotal:{position:"absolute",marginLeft:"265px",marginTop:"640px"}}})(X)),Q=n(26),Z=n(29),ee=n.n(Z),te=Object(f.withStyles)(function(e){return{iconHover:{color:e.palette.primary.main,"&:hover":{color:e.palette.primary.light}}}})(function(e){var t=e.classes;return o.a.createElement(ee.a,{className:t.iconHover,style:{fontSize:e.iconSize}},e.iconName)}),ne=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleClickNext=function(){var e=n.props,t=e.songList,a=e.songId,o=e.songIndex,r=e.token;a&&null!==o&&(o+1>=t.length?(n.props.playAudio(t[0]),n.props.playSong(t[0].track),n.props.getSongFeatures(t[0].track.id,r),n.props.getSongIndex(0)):(n.props.playAudio(t[o+1]),n.props.playSong(t[o+1].track),n.props.getSongFeatures(t[o+1].track.id,r),n.props.getSongIndex(o+1)))},n.handleClickPrevious=function(){var e=n.props,t=e.songList,a=e.songId,o=e.songIndex,r=e.token;a&&null!==o&&(0===o?(n.props.getSongIndex(t.length-1),n.props.playSong(t[t.length-1].track),n.props.getSongFeatures(t[t.length-1].track.id,r),n.props.playAudio(t[t.length-1])):(n.props.getSongIndex(o-1),n.props.playSong(t[o-1].track),n.props.getSongFeatures(t[o-1].track.id,r),n.props.playAudio(t[o-1])))},n.handleClickPlayPause=function(){var e=n.props,t=e.songPlaying,a=e.songPaused,o=e.songId;t&&a&&n.props.resumeAudio(),t&&!a&&n.props.pauseAudio(),!t&&o&&(console.log(n.props),n.props.resumeAudio())},n.state={playPauseIcon:e.songPaused?"play_arrow":"pause"},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.songPaused!==e.songPaused&&this.setState({playPauseIcon:this.props.songPaused?"play_arrow":"pause"})}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(S.a,{className:e.root,container:!0,direction:"row",spacing:0},o.a.createElement(S.a,{item:!0},o.a.createElement(Q.a,{disableRipple:!0,className:e.buttonSO,onClick:this.handleClickPrevious},o.a.createElement(te,{iconName:"skip_previous",iconSize:40}))),o.a.createElement(S.a,{item:!0},o.a.createElement(Q.a,{disableRipple:!0,className:e.buttonSO,onClick:this.handleClickPlayPause},o.a.createElement(te,{iconName:this.state.playPauseIcon,iconSize:40}))),o.a.createElement(S.a,{item:!0},o.a.createElement(Q.a,{disableRipple:!0,className:e.buttonSO,onClick:this.handleClickNext},o.a.createElement(te,{iconName:"skip_next",iconSize:40}))))}}]),t}(o.a.Component),ae={playSong:O,getSongFeatures:T,getSongIndex:x},oe=Object(i.b)(function(e){return{songPaused:e.songsReducer.songPaused,songPlaying:e.songsReducer.songPlaying,songDetails:e.songsReducer.songDetails,songList:e.songsReducer.songs?e.songsReducer.songs:null,songId:e.songsReducer.songId?e.songsReducer.songId:null,songIndex:e.songsReducer.songIndex,token:e.tokenReducer.token?e.tokenReducer.token:""}},ae)(Object(f.withStyles)({root:{flexGrow:1},buttonSO:{padding:"0px","&:hover":{backgroundColor:"transparent"}}})(ne)),re=Object(f.withStyles)({image:{maxWidth:"640px",maxHeight:"640px"},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%",boxShadow:"2px 2px 10px #000000"}})(function(e){var t=e.classes;return o.a.createElement(S.a,{item:!0,xs:!0,className:t.image},o.a.createElement("img",{className:t.img,alt:"AnalBumCover",src:e.albumcover}))}),se=n(70),ie=n.n(se),ce=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).secondFormatter=function(e){var t=Math.ceil(e);return t<10?"0:0".concat(t):"0:".concat(t)},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(ie.a,{min:0,max:30,step:1,className:e.root,classes:{container:e.slider,track:e.trackThickness,thumb:e.thumbIcon,activated:e.activated,jumped:e.jumped,focused:e.focused},value:Math.ceil(this.props.songsInfo.timeElapsed)}),o.a.createElement("div",{className:e.elapsedTimeMargin},o.a.createElement(K.a,{variant:"caption",noWrap:!0},this.secondFormatter(this.props.songsInfo.timeElapsed))),o.a.createElement("div",{className:e.totalTimeMargin},o.a.createElement(K.a,{variant:"caption",noWrap:!0},"0:30")))}}]),t}(o.a.Component),le=Object(i.b)(function(e){return{songsInfo:e.songsReducer}})(Object(f.withStyles)(function(e){return{root:{flexGrow:0,position:"relative"},elapsedTimeMargin:{verticalAlign:"bottom",float:"left",marginTop:"-10px"},totalTimeMargin:{verticalAlign:"bottom",float:"right",marginTop:"-10px"},slider:{"&:hover":{cursor:"default"},padding:"22px 0px"},trackThickness:{backgroundColor:e.palette.primary.main,height:5},thumbIcon:{opacity:1,"&:hover":{boxShadow:"0px 0px 0px 5px var(--custom-color)"},"&$activated":{boxShadow:"0px 0px 0px 9px var(--custom-color)!important"},"&$jumped":{boxShadow:"0px 0px 0px 9px var(--custom-color)!important"}},activated:{},jumped:{},focused:{}}})(ce)),ue=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e,t){n.setState({value:t}),n.props.updateVolume(Math.ceil(t))},n.state={value:e.volume},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return o.a.createElement(ie.a,{min:0,max:100,className:e.root,classes:{container:e.slider,track:e.trackThickness,thumb:e.thumbIcon},value:t,onChange:this.handleChange,onDragEnd:this.props.jumpAtTime})}}]),t}(o.a.Component),pe={updateVolume:function(e){return{type:"UPDATE_VOLUME",volume:e}}},de=Object(i.b)(function(e){return{volume:e.soundReducer.volume}},pe)(Object(f.withStyles)(function(e){return{root:{flexGrow:1},slider:{padding:"22px 0px","&:hover $thumbIcon":{opacity:1}},trackThickness:{backgroundColor:e.palette.primary.main,height:5},thumbIcon:{opacity:0}}})(ue)),he=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(S.a,{className:e.root,container:!0,direction:"row"},o.a.createElement(S.a,{item:!0,xs:2},o.a.createElement(ee.a,{className:e.ico,style:{fontSize:20}},"volume_up")),o.a.createElement(S.a,{item:!0,xs:!0},o.a.createElement(de,null)))}}]),t}(o.a.Component),ge=Object(f.withStyles)(function(e){return{root:{flexGrow:0},volIcon:{float:"right",marginRight:"-10px","&:hover":{backgroundColor:"transparent"}},ico:{float:"right",marginTop:"12px",marginRight:"5px",color:e.palette.primary.main}}})(he),me=Object(i.b)(function(e){return{songDetails:e.songsReducer.songDetails}})(function(e){return o.a.createElement(K.a,{variant:"h4",color:"primary",noWrap:!0},e.songDetails?e.songDetails.artists[0].name+" - "+e.songDetails.name:null)}),fe=Object(f.withStyles)({outer:{width:"100%",height:"100%",position:"absolute",backgroundColor:"rgba(255, 255, 255, 0.6)"}})(function(e){var t=e.classes;return o.a.createElement("div",{className:t.outer,style:{backgroundColor:e.bcolor}},e.children)}),ye=Object(f.withStyles)({inner:{width:"100%",height:"100%",position:"absolute",transform:"scale(0.89)"}})(function(e){var t=e.classes;return o.a.createElement("div",{className:t.inner},e.children)}),Se=n(63),Ee=n.n(Se),be=Object(f.withStyles)(function(e){return{fab:{backgroundColor:"#1DB954","&:hover":{backgroundColor:"#14813a"}},container:{maxWidth:"640px"},text:{paddingBottom:"30px"}}})(function(e){var t=e.classes;return o.a.createElement("div",{className:t.container},o.a.createElement(K.a,{className:t.text,variant:"h4",color:"primary"},"The colors will match the mood of the song."),o.a.createElement(Ee.a,{variant:"extended",className:t.fab,onClick:function(){return window.location.href="https://accounts.spotify.com/authorize?client_id=11ca528f5f3447c3913e6f903faa8999&scope=playlist-read-private%20playlist-read-collaborative%20user-library-read%20user-read-private%20user-read-email%20user-top-read%20user-read-playback-state&response_type=token&redirect_uri=https://shaggun.github.io/spotify-moody-player"}},o.a.createElement(K.a,{color:"primary"},"LOG IN WITH SPOTIFY")))}),ve=n(117),ke=n.n(ve),Oe=n(38),xe=n.n(Oe),Te=n(64),Ie=n.n(Te),Ce=n(65),we=n.n(Ce),je=n(37),Pe=n.n(je),_e=n(43),Re=n.n(_e),Ne=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChangeSettings=function(e){return function(t){switch(n.setState(Object(m.a)({},e,t.target.checked)),e){case"hiddenPlaylist":return n.props.toggleHiddenPlaylist();case"dynamicColor":return n.props.toggleDynamicColor();case"darkMode":return n.props.toggleDarkMode();default:return null}}},n.state={hiddenPlaylist:e.switchState.uiHiddenPlaylist,dynamicColor:e.switchState.uiDynamicColor,darkMode:e.switchState.uiDarkMode},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(Re.a,{className:e.paper},o.a.createElement(Ie.a,{component:"fieldset",className:e.fieldSet},o.a.createElement(we.a,null,o.a.createElement(Pe.a,{control:o.a.createElement(xe.a,{checked:this.state.hiddenPlaylist,onChange:this.handleChangeSettings("hiddenPlaylist"),value:"hiddenPlay"}),label:"Hide Playlist"}),o.a.createElement(Pe.a,{control:o.a.createElement(xe.a,{checked:this.state.dynamicColor,onChange:this.handleChangeSettings("dynamicColor"),value:"dynamicColor"}),label:"Dynamic Color"}),this.state.dynamicColor?null:o.a.createElement(Pe.a,{control:o.a.createElement(xe.a,{checked:this.state.darkMode,onChange:this.handleChangeSettings("darkMode"),value:"darkMode"}),label:"Dark Mode"}))))}}]),t}(o.a.Component),Ae={toggleDarkMode:function(){return{type:"TOGGLE_DARK_MODE"}},toggleDynamicColor:function(){return{type:"TOGGLE_DYNAMIC_COLOR"}},toggleHiddenPlaylist:function(){return{type:"TOGGLE_HIDE_PLAYLIST"}}},De=Object(i.b)(function(e){return{switchState:e.uiSwitches}},Ae)(Object(f.withStyles)(function(e){return{paper:{position:"absolute",top:60,right:0,left:-100},wholeSet:{position:"relative"},fieldSet:{marginLeft:"10px"}}})(Ne)),Ge=n(88),Le=n.n(Ge),Fe=n(118),Me=n.n(Fe),Ue=n(119),He=n.n(Ue),Ye=n(120),ze=n.n(Ye),Be=n(121),We=n.n(Be),Ve=n(122),qe=n.n(Ve),Ke=n(123),Xe=n.n(Ke),$e=n(124),Je=n.n($e),Qe=n(125),Ze=n.n(Qe),et=n(126),tt=n.n(et),nt=n(127),at=n.n(nt),ot=n(128),rt=n.n(ot),st=n(87),it=n.n(st),ct=n(129),lt=n.n(ct),ut=[{color:Le.a,shadeText:300},{color:Me.a,shadeText:400},{color:He.a,shadeText:700},{color:ze.a,shadeText:900},{color:We.a,shadeText:900},{color:qe.a,shadeText:800},{color:Xe.a,shadeText:600},{color:Je.a,shadeText:500},{color:Ze.a,shadeText:300},{color:tt.a,shadeText:600},{color:at.a,shadeText:500},{color:rt.a,shadeText:400},{color:it.a,shadeText:200},{color:lt.a,shadeText:200}],pt=function(e){return Math.round(13*e)},dt=function(e){return 100*Math.round((800*e+100)/100)},ht=function(e,t){var n=pt(e),a=dt(t);return ut[n].color[a]},gt=function(e,t){var n=pt(e),a=dt(t);return ut[n].shadeText>=a},mt=function(e,t){var n=e.replace("#","");return"rgba("+parseInt(n.substring(0,2),16)+","+parseInt(n.substring(2,4),16)+","+parseInt(n.substring(4,6),16)+","+t+")"},ft=Object(f.createMuiTheme)({palette:{type:"dark",primary:{main:"#ffffff",light:"#1DB954"},secondary:{main:"#1DB954"}},typography:{useNextVariants:!0}}),yt=Object(f.createMuiTheme)({palette:{type:"light",primary:{main:"#242424",light:"#1DB954"},secondary:{main:"#1DB954"}},typography:{useNextVariants:!0}}),St=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,dynamicCover:ke.a,dynamicBGColor:"rgba(2,136,209,0.6)",dynamicDarkText:!1,hiddenPlaylist:!1,dynamicColor:!0,darkMode:!0},n.stopSong=function(){n.audio?(n.props.stopSong(),n.audio.pause(),n.props.updateSongTime(0),clearInterval(n.state.routine)):(n.props.stopSong(),n.props.updateSongTime(0),clearInterval(n.state.routine))},n.resumeSong=function(){n.audio&&(n.props.resumeSong(),n.audio.play(),n.calculateTime())},n.pauseSong=function(){n.audio&&(n.props.pauseSong(),n.audio.pause(),clearInterval(n.state.routine))},n.playAudio=function(e){var t=n.props.updateSongTime;clearInterval(n.state.routine),null!==e.track.preview_url?void 0===n.audio?(n.audio=new Audio(e.track.preview_url),n.audio.play(),n.calculateTime()):(t(0),n.audio.pause(),n.audio=new Audio(e.track.preview_url),n.audio.play(),n.calculateTime()):n.stopSong()},n.handleClickSettings=function(e){n.setState(function(e){return{open:!e.open}})},n.handleClickAway=function(){n.setState({open:!1})},n.handleChangeSettings=function(e){return function(t){n.setState(Object(m.a)({},e,t.target.checked))}},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.songFeatures.energy&&this.props.songFeatures!==e.songFeatures&&this.setState(function(e){return{dynamicCover:t.props.songDetails.album.images[0].url,dynamicBGColor:mt(ht(t.props.songFeatures.energy,t.props.songFeatures.valence),.6),dynamicDarkText:gt(t.props.songFeatures.energy,t.props.songFeatures.valence)}}),void 0!==this.audio&&(this.audio.volume=this.props.volume/100)}},{key:"calculateTime",value:function(){var e=this,t=setInterval(function(){e.audio.ended?(e.pauseSong(),e.props.updateSongTime(0)):e.props.songsInfo.songPaused||e.props.updateSongTime(e.audio.currentTime)},1e3);this.setState({routine:t})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.open,a=t.dynamicCover;return document.body.style.backgroundImage="url(".concat(a,")"),o.a.createElement(f.MuiThemeProvider,{theme:this.props.switchState.uiDynamicColor?this.state.dynamicDarkText?yt:ft:this.props.switchState.uiDarkMode?ft:yt},o.a.createElement(fe,{bcolor:this.props.switchState.uiDynamicColor?this.state.dynamicBGColor:this.props.switchState.uiDarkMode?"rgba(0, 0, 0, 0.6)":"rgba(255, 255, 255, 0.4)"},o.a.createElement(ye,null,o.a.createElement("div",{className:e.root},o.a.createElement(S.a,{container:!0,justify:"space-between",alignItems:"stretch",spacing:16,className:e.gridContainer},o.a.createElement(S.a,{item:!0,container:!0,xs:12,direction:"row",justify:"space-between",alignItems:"center",spacing:16,wrap:"nowrap"},o.a.createElement(S.a,{item:!0,xs:1},o.a.createElement(ee.a,{className:e.iconPlaceholder,style:{fontSize:40}},"fiber_manual_record")),o.a.createElement(S.a,{item:!0,zeroMinWidth:!0},o.a.createElement(me,null)),o.a.createElement(S.a,{item:!0,xs:1,container:!0,justify:"flex-end"},this.props.auth.token?o.a.createElement("div",{className:e.wholeSet},o.a.createElement(b.a,{onClickAway:this.handleClickAway},o.a.createElement("div",null,o.a.createElement(k.a,{disableRipple:!0,className:e.iconSelection,onClick:this.handleClickSettings},o.a.createElement(te,{iconName:"more_horiz",iconSize:40})),n?o.a.createElement(De,null):null))):null)),this.props.switchState.uiHiddenPlaylist?o.a.createElement(S.a,{item:!0,container:!0,xs:12,direction:"row",spacing:16,justify:"center",alignItems:"center",className:e.topRow},o.a.createElement(re,{albumcover:a})):o.a.createElement(S.a,{item:!0,container:!0,xs:12,direction:"row",spacing:16,justify:"center",alignItems:"center",className:e.topRow},o.a.createElement(S.a,{item:!0,container:!0,xs:!0,justify:"flex-end"},o.a.createElement(re,{albumcover:a})),o.a.createElement(S.a,{item:!0,container:!0,xs:6},this.props.auth.token?o.a.createElement(J,{playAudio:this.playAudio}):o.a.createElement(be,null))),o.a.createElement(S.a,{item:!0,container:!0,xs:12,direction:"row",justify:"space-between",spacing:16},this.props.auth.token?o.a.createElement(o.a.Fragment,null,o.a.createElement(S.a,{item:!0},o.a.createElement(oe,{pauseAudio:this.pauseSong,resumeAudio:this.resumeSong,playAudio:this.playAudio})),o.a.createElement(S.a,{item:!0,xs:!0},o.a.createElement(le,null)),o.a.createElement(S.a,{item:!0,sm:1},o.a.createElement(ge,null))):null))))))}}]),t}(o.a.Component),Et={stopSong:function(){return{type:"STOP_SONG"}},pauseSong:function(){return{type:"PAUSE_SONG"}},resumeSong:function(){return{type:"RESUME_SONG"}},updateSongTime:function(e){return{type:"UPDATE_SONG_TIME",time:e}}},bt=Object(i.b)(function(e){return{switchState:e.uiSwitches,auth:e.tokenReducer,songDetails:e.songsReducer.songDetails,songFeatures:e.songsReducer.features?e.songsReducer.features:"",songsInfo:e.songsReducer,volume:e.soundReducer.volume}},Et)(Object(f.withStyles)(function(e){return{root:{flexGrow:1,width:"100%",height:"100vh"},gridContainer:{},topRow:{height:"85vh",overflow:"hidden"},paper:{position:"absolute",top:60,right:0,left:-100},iconSelection:{"&:hover":{backgroundColor:"transparent"}},iconPlaceholder:{color:"rgba(0,0,0,0)"},wholeSet:{position:"relative"},fieldSet:{marginLeft:"10px"},ContainerOuter:{width:"100%",height:"100%",position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.6)"},ContainerInner:{width:"100%",height:"100%",position:"absolute",transform:"scale(0.89)"}}})(St)),vt=n(67),kt=n.n(vt),Ot=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);e=n.exec(a);)t[e[1]]=decodeURIComponent(e[2]);t.access_token&&this.props.setToken(t.access_token)}},{key:"componentDidUpdate",value:function(e){e.token!==this.props.token&&this.props.fetchUser(this.props.token.token)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(kt.a,null),o.a.createElement(bt,null))}}]),t}(o.a.Component),xt=Object(i.b)(function(e){return{token:e.tokenReducer}},{setToken:function(e){return{type:"SET_TOKEN",token:e}},fetchUser:function(e){return function(t){var n=new Request("https://api.spotify.com/v1/me",{headers:new Headers({Authorization:"Bearer "+e})});fetch(n).then(function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e.json()}).then(function(e){t({type:"FETCH_USER_SUCCESS",user:e})}).catch(function(e){t({type:"FETCH_USER_ERROR"})})}}})(Ot),Tt=n(9),It={uiHiddenPlaylist:!1,uiDynamicColor:!0,uiDarkMode:!0},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It;switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_HIDE_PLAYLIST":return Object(Tt.a)({},e,{uiHiddenPlaylist:!e.uiHiddenPlaylist});case"TOGGLE_DYNAMIC_COLOR":return Object(Tt.a)({},e,{uiDynamicColor:!e.uiDynamicColor});case"TOGGLE_DARK_MODE":return Object(Tt.a)({},e,{uiDarkMode:!e.uiDarkMode});default:return e}},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return Object(Tt.a)({},e,{user:t.user,fetchUserError:!1});case"FETCH_USER_ERROR":return Object(Tt.a)({},e,{fetchUserError:!0});default:return e}},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PLAYLISTS_PENDING":return Object(Tt.a)({fetchPlaylistsPending:!0},e);case"FETCH_PLAYLISTS_SUCCESS":return Object(Tt.a)({playlists:t.playlists,fetchPlaylistError:!1,fetchPlaylistsPending:!1},e);case"FETCH_PLAYLISTS_ERROR":return Object(Tt.a)({fetchPlaylistError:!0,fetchPlaylistsPending:!1},e);case"GET_PLAYLIST_INDEX":return Object(Tt.a)({},e,{playlistIndex:t.playlistIndex});default:return e}},Pt={fetchSongsPending:!0,songPlaying:!1,timeElapsed:0,songId:0,viewType:"songs",songPaused:!0},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PLAYLIST_SONGS_PENDING":return Object(Tt.a)({},e,{fetchSongsPending:!0});case"FETCH_PLAYLIST_SONGS_SUCCESS":return Object(Tt.a)({},e,{songs:t.songs,fetchArtistSongsError:!1,fetchArtistSongsPending:!1,playlistId:t.playlistId,fetchSongsPending:!1});case"FETCH_PLAYLIST_SONGS_ERROR":return Object(Tt.a)({},e,{fetchArtistSongsError:!0,fetchArtistSongsPending:!1,fetchSongsPending:!0});case"PLAY_SONG":return Object(Tt.a)({},e,{songPlaying:!0,songDetails:t.song,songId:t.song.id,timeElapsed:0,songPaused:!1});case"STOP_SONG":return Object(Tt.a)({},e,{songPlaying:!1,timeElapsed:0,songPaused:!0});case"PAUSE_SONG":return Object(Tt.a)({},e,{songPaused:!0});case"RESUME_SONG":return Object(Tt.a)({},e,{songPaused:!1});case"UPDATE_SONG_TIME":return Object(Tt.a)({},e,{timeElapsed:t.time});case"GET_SONG_INDEX":return Object(Tt.a)({},e,{songIndex:t.songIndex});case"GET_SONG_FEATURES_ERROR":return Object(Tt.a)({},e,{getSongFeaturesError:!0,getSongFeaturesPending:!1});case"GET_SONG_FEATURES_PENDING":return Object(Tt.a)({},e,{getSongFeaturesPending:!0,getSongFeaturesError:!1});case"GET_SONG_FEATURES_SUCCESS":return Object(Tt.a)({},e,{features:t.features,getSongFeaturesError:!1,getSongFeaturesPending:!1});default:return e}},Rt=Object(c.c)({userReducer:wt,uiSwitches:Ct,playlistsReducer:jt,songsReducer:_t,soundReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{volume:100},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_VOLUME":return{volume:t.volume};default:return e}},tokenReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(Tt.a)({},e,{token:t.token});default:return e}}}),Nt=Object(c.d)(Rt,Object(c.a)(l.a));s.a.render(o.a.createElement(i.a,{store:Nt},o.a.createElement(xt,null)),document.querySelector("#root"))}},[[208,1,2]]]);
//# sourceMappingURL=main.5d972201.chunk.js.map